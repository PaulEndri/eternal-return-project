"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.WikiCache = void 0;
class WikiCache {
    constructor() {
        this._cache = {};
        this.count = 0;
    }
    get(key) {
        let value = this._cache[key];
        if (typeof value === 'object') {
            value = { ...value };
        }
        return Promise.resolve(value);
    }
    set(key, value) {
        this._cache[key] = value;
        this.count = value !== null ? this.count + 1 : this.count - 1;
        return Promise.resolve();
    }
    async massInsert(data) {
        await Promise.all(Object.entries(data).map(([key, val]) => this.set(key, val)));
    }
    getAll() {
        return Promise.resolve(this._cache);
    }
    getCount() {
        return this.count;
    }
}
exports.WikiCache = WikiCache;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lraUNhY2hlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL3dpa2lDYWNoZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFNQSxNQUFhLFNBQVM7SUFBdEI7UUFDUyxXQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ1osVUFBSyxHQUFHLENBQUMsQ0FBQztJQWlDbkIsQ0FBQztJQS9CTyxHQUFHLENBQVUsR0FBVztRQUM5QixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRTdCLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFO1lBQzlCLEtBQUssR0FBRyxFQUFFLEdBQUcsS0FBSyxFQUFFLENBQUM7U0FDckI7UUFFRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBVSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVNLEdBQUcsQ0FBVSxHQUFXLEVBQUUsS0FBUTtRQUN4QyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztRQUV6QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUU5RCxPQUFPLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRU0sS0FBSyxDQUFDLFVBQVUsQ0FBVSxJQUF1QjtRQUN2RCxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQ2hCLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBRSxHQUFHLEVBQUUsR0FBRyxDQUFlLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQzNFLENBQUM7SUFDSCxDQUFDO0lBRU0sTUFBTTtRQUNaLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBMkIsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFTSxRQUFRO1FBQ2QsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ25CLENBQUM7Q0FDRDtBQW5DRCw4QkFtQ0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiogXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKiBAbW9kdWxlIFdpa2lEYXRhXHJcbiAqKi9cclxuaW1wb3J0IHsgSVdpa2lDYWNoZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvSVdpa2lDYWNoZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgV2lraUNhY2hlIGltcGxlbWVudHMgSVdpa2lDYWNoZSB7XHJcblx0cHJpdmF0ZSBfY2FjaGUgPSB7fTtcclxuXHRwcml2YXRlIGNvdW50ID0gMDtcclxuXHJcblx0cHVibGljIGdldDxUID0gYW55PihrZXk6IHN0cmluZykge1xyXG5cdFx0bGV0IHZhbHVlID0gdGhpcy5fY2FjaGVba2V5XTtcclxuXHJcblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xyXG5cdFx0XHR2YWx1ZSA9IHsgLi4udmFsdWUgfTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlIGFzIFQpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldDxUID0gYW55PihrZXk6IHN0cmluZywgdmFsdWU6IFQpIHtcclxuXHRcdHRoaXMuX2NhY2hlW2tleV0gPSB2YWx1ZTtcclxuXHJcblx0XHR0aGlzLmNvdW50ID0gdmFsdWUgIT09IG51bGwgPyB0aGlzLmNvdW50ICsgMSA6IHRoaXMuY291bnQgLSAxO1xyXG5cclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhc3luYyBtYXNzSW5zZXJ0PFQgPSBhbnk+KGRhdGE6IFJlY29yZDxzdHJpbmcsIFQ+KSB7XHJcblx0XHRhd2FpdCBQcm9taXNlLmFsbChcclxuXHRcdFx0T2JqZWN0LmVudHJpZXMoZGF0YSkubWFwKChbIGtleSwgdmFsIF06IFtzdHJpbmcsIFRdKSA9PiB0aGlzLnNldChrZXksIHZhbCkpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldEFsbDxUID0gYW55PigpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fY2FjaGUgYXMgUmVjb3JkPHN0cmluZywgVD4pO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldENvdW50KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuY291bnQ7XHJcblx0fVxyXG59XHJcbiJdfQ==